// Modest Modal 1.0.0
// Jonathan Halchak, www.jrhalchak.com, @onlinebhero
// License: MIT - do whatever you want
!function(o,t,a,e){var n=[],s=!1;o.modestmodal=o.modestmodal||function(t){function a(o){return o?{type:o.type||i.type,content:o.content||i.content,closeButton:o.closeButton||i.closeButton,openSelector:o.openSelector||i.openSelector,modalClass:o.modalClass||i.modalClass,transitionDuration:o.transitionDuration||i.transitionDuration,positionX:o.positionX||i.positionX,positionY:o.positionY||i.positionY,overlayBackground:o.overlayBackground||i.overlayBackground,disableEscape:"undefined"!=typeof o.disableEscape?o.disableEscape:i.disableEscape,uncloseable:"undefined"!=typeof o.uncloseable?o.uncloseable:i.uncloseable}:{}}function e(t,a){n.push({modal:t,overlay:a}),t.appendTo("body").css("display","block"),a.appendTo("body").css("visibility","visible"),setTimeout(function(){a.css("opacity",1).on("click",function(){o(this).hasClass("uncloseable")||o.modestmodal.close()}),t.css({opacity:1,top:"50%"})},300)}function l(t){o("body").on("click",t,function(){o.modestmodal.close()})}var i={$modal:o('<div class="modestmodal-modal" />'),$overlay:o('<div class="modestmodal-overlay" />'),closeButton:".modestmodal-close",openSelector:"[data-modestmodal]",type:null,content:"",modalClass:"",zIndex:99900,transitionDuration:"0.4s",transitionProperty:{"-webkit-transition":"all 0.4s ease","-moz-transition":"all 0.4s ease",transition:"all 0.4s ease;"},positionX:"50%",positionY:"60%",modalStyles:{display:"none",position:"fixed","-webkit-transform":"translate(-50%, -50%)","-ms-transform":"translate(-50%, -50%)",transform:"translate(-50%, -50%)",opacity:0},overlayStyles:{visibility:"hidden",position:"fixed",top:0,bottom:0,left:0,right:0,opacity:0,width:"100%",height:"100%","background-color":"black"},overlayBackground:"rgba(0,0,0,0.3)",uncloseable:!1,disableEscape:!1,ajaxCallback:null};o.modestmodal.init=function(){i=o.extend({},i,a(t)),l(i.closeButton),o("body").on("click",i.openSelector,function(){var t=o(this),a={type:t.data("modestmodal-type")||i.type,content:t.data("modestmodal-content")||i.content,modalClass:t.data("modestmodal-modal-class")||i.modalClass,closeButton:t.data("modestmodal-close-selector")||i.closeButton,transitionDuration:t.data("modestmodal-transition-duration")||i.transitionDuration,positionX:t.data("modestmodal-position-x")||i.positionX,positionY:t.data("modestmodal-position-y")||i.positionY,overlayBackground:t.data("modestmodal-overlay-background")||i.overlayBackground,disableEscape:"undefined"!=typeof t.attr("data-modestmodal-disable-escape")?!0:!1,uncloseable:"undefined"!=typeof t.attr("data-modestmodal-uncloseable")?!0:!1};a.closeButton!==i.closeButton&&l(a.closeButton),o.modestmodal.open(a)}).on("keyup",function(t){var a=n.length>0?n[n.length-1].overlay:null;27==t.which&&a&&!a.hasClass("disableEscape")&&o.modestmodal.close()})},o.modestmodal.open=function(t){var s=i.$overlay.clone(),l=i.$modal.clone(),d=n.length+1,c=o.extend({},i,a(t)),r=c.overlayStyles;return c.type?(c.transitionDuration!==i.transitionDuration&&(c.transitionProperty={"-webkit-transition":"all "+c.transitionDuration+"ease","-moz-transition":"all "+c.transitionDuration+"ease",transition:"all "+c.transitionDuration+"ease"}),r.background=c.overlayBackground,s.attr("id","modestmodal-overlay-"+d).css(r).css(c.transitionProperty).css("z-index",d+c.zIndex),c.uncloseable&&s.addClass("uncloseable"),c.disableEscape&&s.addClass("disableEscape"),l.addClass(c.modalClass).attr("id","modestmodal-modal-"+d).css(c.modalStyles).css(c.transitionProperty).css({"z-index":d+c.zIndex+1,top:c.positionY,left:c.positionX}),void("content"==c.type||"html"==c.type?(l.html("html"==c.type?o(c.content).html():c.content),e(l,s)):"ajax"==c.type&&o.get(c.content).then(function(o){l.html(o),e(l,s),"function"==typeof c.ajaxCallback&&c.ajaxCallback()}).error(function(){console.log("modestmodal: Error with AJAX call.")}))):!1},o.modestmodal.close=function(){var o=n.pop();o.modal.css("opacity",0),o.overlay.css("opacity",0),setTimeout(function(){o.modal.remove(),o.overlay.remove()},400)},o.modestmodal.destroy=function(){o("[id^=modestmodal-],[class^=modestmodal-]").remove(),o.modestmodal.prototype.destroy.apply(this,arguments)},s?t&&(i=o.extend({},i,a(t))):(o.modestmodal.init(),s=!0)}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVzdG1vZGFsLmpxdWVyeS5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiZG9jdW1lbnQiLCJ1bmRlZmluZWQiLCJfY3VycmVudE1vZGFscyIsIm1vZGVzdG1vZGFsSW5pdGlhbGl6ZWQiLCJtb2Rlc3Rtb2RhbCIsIm9wdGlvbnMiLCJjaGFuZ2VhYmxlUHJvcGVydGllcyIsIm9wdGlvbk9iamVjdCIsInR5cGUiLCJkZWZhdWx0cyIsImNvbnRlbnQiLCJjbG9zZUJ1dHRvbiIsIm9wZW5TZWxlY3RvciIsIm1vZGFsQ2xhc3MiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJwb3NpdGlvblgiLCJwb3NpdGlvblkiLCJvdmVybGF5QmFja2dyb3VuZCIsImRpc2FibGVFc2NhcGUiLCJ1bmNsb3NlYWJsZSIsInB1c2hBbmRBcHBlbmRNb2RhbHMiLCIkbmV3TW9kYWwiLCIkbmV3T3ZlcmxheSIsInB1c2giLCJtb2RhbCIsIm92ZXJsYXkiLCJhcHBlbmRUbyIsImNzcyIsInNldFRpbWVvdXQiLCJvbiIsInRoaXMiLCJoYXNDbGFzcyIsImNsb3NlIiwib3BhY2l0eSIsInRvcCIsImJpbmRDbG9zZSIsIiRtb2RhbCIsIiRvdmVybGF5IiwiekluZGV4IiwidHJhbnNpdGlvblByb3BlcnR5IiwiLXdlYmtpdC10cmFuc2l0aW9uIiwiLW1vei10cmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsIm1vZGFsU3R5bGVzIiwiZGlzcGxheSIsInBvc2l0aW9uIiwiLXdlYmtpdC10cmFuc2Zvcm0iLCItbXMtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwib3ZlcmxheVN0eWxlcyIsInZpc2liaWxpdHkiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmQtY29sb3IiLCJhamF4Q2FsbGJhY2siLCJpbml0IiwiZXh0ZW5kIiwiJHRoaXMiLCJjdXN0b21PcHRpb25zIiwiZGF0YSIsImF0dHIiLCJvcGVuIiwiZSIsIiRsYXRlc3RPdmVybGF5IiwibGVuZ3RoIiwid2hpY2giLCJjbG9uZSIsIm1vZGFsQ291bnQiLCJvcHRzIiwiY29tcGxldGVPdmVybGF5U3R5bGVzIiwiYmFja2dyb3VuZCIsImFkZENsYXNzIiwiei1pbmRleCIsImh0bWwiLCJnZXQiLCJ0aGVuIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiJCRsYXN0T3BlbiIsInBvcCIsInJlbW92ZSIsImRlc3Ryb3kiLCJwcm90b3R5cGUiLCJhcHBseSIsImFyZ3VtZW50cyIsImpRdWVyeSJdLCJtYXBwaW5ncyI6Ijs7O0NBSUMsU0FBWUEsRUFBR0MsRUFBUUMsRUFBVUMsR0FDaEMsR0FBSUMsTUFBcUJDLEdBQXlCLENBRWxETCxHQUFFTSxZQUFjTixFQUFFTSxhQUFlLFNBQVNDLEdBOEN0QyxRQUFTQyxHQUFxQkMsR0FDNUIsTUFBSUEsSUFFRkMsS0FBTUQsRUFBYUMsTUFBUUMsRUFBU0QsS0FDcENFLFFBQVNILEVBQWFHLFNBQVdELEVBQVNDLFFBQzFDQyxZQUFhSixFQUFhSSxhQUFlRixFQUFTRSxZQUNsREMsYUFBY0wsRUFBYUssY0FBZ0JILEVBQVNHLGFBQ3BEQyxXQUFZTixFQUFhTSxZQUFjSixFQUFTSSxXQUNoREMsbUJBQW9CUCxFQUFhTyxvQkFBc0JMLEVBQVNLLG1CQUNoRUMsVUFBV1IsRUFBYVEsV0FBYU4sRUFBU00sVUFDOUNDLFVBQVdULEVBQWFTLFdBQWFQLEVBQVNPLFVBQzlDQyxrQkFBbUJWLEVBQWFVLG1CQUFxQlIsRUFBU1Esa0JBQzlEQyxjQUFxRCxtQkFBL0JYLEdBQWFXLGNBQWdDWCxFQUFhVyxjQUFnQlQsRUFBU1MsY0FDekdDLFlBQWlELG1CQUE3QlosR0FBYVksWUFBOEJaLEVBQWFZLFlBQWNWLEVBQVNVLGdCQUl2RyxRQUFTQyxHQUFvQkMsRUFBV0MsR0FDdENwQixFQUFlcUIsTUFDYkMsTUFBT0gsRUFDUEksUUFBU0gsSUFHWEQsRUFBVUssU0FBUyxRQUFRQyxJQUFJLFVBQVUsU0FDekNMLEVBQVlJLFNBQVMsUUFBUUMsSUFBSSxhQUFhLFdBQzlDQyxXQUFXLFdB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LFlBQVlpRixRQUFVLFdBQ3BCdkYsRUFBRSw0Q0FBNENzRixTQUM5Q3RGLEVBQUVNLFlBQVlrRixVQUFVRCxRQUFRRSxNQUFNekQsS0FBTTBELFlBRzVDckYsRUFHT0UsSUFDVEksRUFBV1gsRUFBRTZELFVBQVdsRCxFQUFVSCxFQUFxQkQsTUFIdkRQLEVBQUVNLFlBQVlzRCxPQUNkdkQsR0FBeUIsS0FLN0JzRixPQUFRMUYsT0FBU0MiLCJmaWxlIjoibW9kZXN0bW9kYWwuanF1ZXJ5Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIE1vZGVzdCBNb2RhbCAxLjAuMFxuLy8gSm9uYXRoYW4gSGFsY2hhaywgd3d3LmpyaGFsY2hhay5jb20sIEBvbmxpbmViaGVyb1xuLy8gTGljZW5zZTogTUlUIC0gZG8gd2hhdGV2ZXIgeW91IHdhbnRcblxuOyhmdW5jdGlvbiAoICQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCApIHtcbiAgdmFyIF9jdXJyZW50TW9kYWxzID0gW10sIG1vZGVzdG1vZGFsSW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAkLm1vZGVzdG1vZGFsID0gJC5tb2Rlc3Rtb2RhbCB8fCBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAvLyAqKiBtZWFucyB3aWxsIGFsbG93IG92ZXJyaWRlXG4gICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGRlZmF1bHRzID0ge1xuICAgICAgICAgICRtb2RhbDogJCgnPGRpdiBjbGFzcz1cIm1vZGVzdG1vZGFsLW1vZGFsXCIgLz4nKSxcbiAgICAgICAgICAkb3ZlcmxheTogJCgnPGRpdiBjbGFzcz1cIm1vZGVzdG1vZGFsLW92ZXJsYXlcIiAvPicpLFxuICAgICAgICAgIGNsb3NlQnV0dG9uOiAnLm1vZGVzdG1vZGFsLWNsb3NlJywgLy8gKipcbiAgICAgICAgICBvcGVuU2VsZWN0b3I6ICdbZGF0YS1tb2Rlc3Rtb2RhbF0nLCAvLyAqKlxuICAgICAgICAgIHR5cGU6IG51bGwsIC8vICoqXG4gICAgICAgICAgY29udGVudDogJycsIC8vICoqXG4gICAgICAgICAgbW9kYWxDbGFzczogJycsIC8vICoqXG4gICAgICAgICAgekluZGV4OiA5OTkwMCxcbiAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246ICcwLjRzJywgLy8gKipcbiAgICAgICAgICB0cmFuc2l0aW9uUHJvcGVydHk6IHtcbiAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbic6ICdhbGwgMC40cyBlYXNlJyxcbiAgICAgICAgICAgICAgJy1tb3otdHJhbnNpdGlvbic6ICdhbGwgMC40cyBlYXNlJyxcbiAgICAgICAgICAgICAgJ3RyYW5zaXRpb24nOiAnYWxsIDAuNHMgZWFzZTsnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3NpdGlvblg6ICc1MCUnLCAvLyBmcm9tIGxlZnQgLy8gKipcbiAgICAgICAgICBwb3NpdGlvblk6JzYwJScsIC8vIGZyb20gdG9wIC8vICoqXG4gICAgICAgICAgbW9kYWxTdHlsZXM6IHtcbiAgICAgICAgICAgICdkaXNwbGF5Jzonbm9uZScsXG4gICAgICAgICAgICAncG9zaXRpb24nOidmaXhlZCcsXG4gICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlKC01MCUsIC01MCUpJyxcbiAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgICAgICAgICAnb3BhY2l0eSc6MFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3ZlcmxheVN0eWxlczoge1xuICAgICAgICAgICAgJ3Zpc2liaWxpdHknOidoaWRkZW4nLFxuICAgICAgICAgICAgJ3Bvc2l0aW9uJzonZml4ZWQnLFxuICAgICAgICAgICAgJ3RvcCc6MCxcbiAgICAgICAgICAgICdib3R0b20nOjAsXG4gICAgICAgICAgICAnbGVmdCc6MCxcbiAgICAgICAgICAgICdyaWdodCc6MCxcbiAgICAgICAgICAgICdvcGFjaXR5JzowLFxuICAgICAgICAgICAgJ3dpZHRoJzonMTAwJScsXG4gICAgICAgICAgICAnaGVpZ2h0JzonMTAwJScsXG4gICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6J2JsYWNrJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG92ZXJsYXlCYWNrZ3JvdW5kOiAncmdiYSgwLDAsMCwwLjMpJywgLy8qKlxuICAgICAgICAgIHVuY2xvc2VhYmxlOiBmYWxzZSwgLy8qKlxuICAgICAgICAgIGRpc2FibGVFc2NhcGU6IGZhbHNlLCAvLyoqXG4gICAgICAgICAgYWpheENhbGxiYWNrOiBudWxsIC8vKipcbiAgICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gY2hhbmdlYWJsZVByb3BlcnRpZXMob3B0aW9uT2JqZWN0KSB7XG4gICAgICAgIGlmKCFvcHRpb25PYmplY3QpIHJldHVybiB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiBvcHRpb25PYmplY3QudHlwZSB8fCBkZWZhdWx0cy50eXBlLFxuICAgICAgICAgIGNvbnRlbnQ6IG9wdGlvbk9iamVjdC5jb250ZW50IHx8IGRlZmF1bHRzLmNvbnRlbnQsXG4gICAgICAgICAgY2xvc2VCdXR0b246IG9wdGlvbk9iamVjdC5jbG9zZUJ1dHRvbiB8fCBkZWZhdWx0cy5jbG9zZUJ1dHRvbixcbiAgICAgICAgICBvcGVuU2VsZWN0b3I6IG9wdGlvbk9iamVjdC5vcGVuU2VsZWN0b3IgfHwgZGVmYXVsdHMub3BlblNlbGVjdG9yLFxuICAgICAgICAgIG1vZGFsQ2xhc3M6IG9wdGlvbk9iamVjdC5tb2RhbENsYXNzIHx8IGRlZmF1bHRzLm1vZGFsQ2xhc3MsXG4gICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiBvcHRpb25PYmplY3QudHJhbnNpdGlvbkR1cmF0aW9uIHx8IGRlZmF1bHRzLnRyYW5zaXRpb25EdXJhdGlvbixcbiAgICAgICAgICBwb3NpdGlvblg6IG9wdGlvbk9iamVjdC5wb3NpdGlvblggfHwgZGVmYXVsdHMucG9zaXRpb25YLFxuICAgICAgICAgIHBvc2l0aW9uWTogb3B0aW9uT2JqZWN0LnBvc2l0aW9uWSB8fCBkZWZhdWx0cy5wb3NpdGlvblksXG4gICAgICAgICAgb3ZlcmxheUJhY2tncm91bmQ6IG9wdGlvbk9iamVjdC5vdmVybGF5QmFja2dyb3VuZCB8fCBkZWZhdWx0cy5vdmVybGF5QmFja2dyb3VuZCxcbiAgICAgICAgICBkaXNhYmxlRXNjYXBlOiB0eXBlb2Ygb3B0aW9uT2JqZWN0LmRpc2FibGVFc2NhcGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9uT2JqZWN0LmRpc2FibGVFc2NhcGUgOiBkZWZhdWx0cy5kaXNhYmxlRXNjYXBlLFxuICAgICAgICAgIHVuY2xvc2VhYmxlOiB0eXBlb2Ygb3B0aW9uT2JqZWN0LnVuY2xvc2VhYmxlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbk9iamVjdC51bmNsb3NlYWJsZSA6IGRlZmF1bHRzLnVuY2xvc2VhYmxlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcHVzaEFuZEFwcGVuZE1vZGFscygkbmV3TW9kYWwsICRuZXdPdmVybGF5KSB7XG4gICAgICAgIF9jdXJyZW50TW9kYWxzLnB1c2goe1xuICAgICAgICAgIG1vZGFsOiAkbmV3TW9kYWwsXG4gICAgICAgICAgb3ZlcmxheTogJG5ld092ZXJsYXlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJG5ld01vZGFsLmFwcGVuZFRvKCdib2R5JykuY3NzKCdkaXNwbGF5JywnYmxvY2snKTtcbiAgICAgICAgJG5ld092ZXJsYXkuYXBwZW5kVG8oJ2JvZHknKS5jc3MoJ3Zpc2liaWxpdHknLCd2aXNpYmxlJyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJG5ld092ZXJsYXkuY3NzKCdvcGFjaXR5JywxKS5vbignY2xpY2snLGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYoISQodGhpcykuaGFzQ2xhc3MoJ3VuY2xvc2VhYmxlJykpXG4gICAgICAgICAgICAgICQubW9kZXN0bW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkbmV3TW9kYWwuY3NzKHsnb3BhY2l0eSc6MSwndG9wJzonNTAlJ30pO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kQ2xvc2UoY2xvc2VCdXR0b24pIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsIGNsb3NlQnV0dG9uLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQubW9kZXN0bW9kYWwuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgICQubW9kZXN0bW9kYWwuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkZWZhdWx0cyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgY2hhbmdlYWJsZVByb3BlcnRpZXMob3B0aW9ucykpO1xuXG4gICAgICAgIGJpbmRDbG9zZShkZWZhdWx0cy5jbG9zZUJ1dHRvbik7XG5cbiAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsIGRlZmF1bHRzLm9wZW5TZWxlY3RvciwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgIGN1c3RvbU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgIHR5cGU6ICR0aGlzLmRhdGEoJ21vZGVzdG1vZGFsLXR5cGUnKSB8fCBkZWZhdWx0cy50eXBlLFxuICAgICAgICAgICAgICBjb250ZW50OiAkdGhpcy5kYXRhKCdtb2Rlc3Rtb2RhbC1jb250ZW50JykgfHwgZGVmYXVsdHMuY29udGVudCxcbiAgICAgICAgICAgICAgbW9kYWxDbGFzczogJHRoaXMuZGF0YSgnbW9kZXN0bW9kYWwtbW9kYWwtY2xhc3MnKSB8fCBkZWZhdWx0cy5tb2RhbENsYXNzLFxuICAgICAgICAgICAgICBjbG9zZUJ1dHRvbjogJHRoaXMuZGF0YSgnbW9kZXN0bW9kYWwtY2xvc2Utc2VsZWN0b3InKSB8fCBkZWZhdWx0cy5jbG9zZUJ1dHRvbixcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAkdGhpcy5kYXRhKCdtb2Rlc3Rtb2RhbC10cmFuc2l0aW9uLWR1cmF0aW9uJykgfHwgZGVmYXVsdHMudHJhbnNpdGlvbkR1cmF0aW9uLFxuICAgICAgICAgICAgICBwb3NpdGlvblg6ICR0aGlzLmRhdGEoJ21vZGVzdG1vZGFsLXBvc2l0aW9uLXgnKSB8fCBkZWZhdWx0cy5wb3NpdGlvblgsXG4gICAgICAgICAgICAgIHBvc2l0aW9uWTogJHRoaXMuZGF0YSgnbW9kZXN0bW9kYWwtcG9zaXRpb24teScpIHx8IGRlZmF1bHRzLnBvc2l0aW9uWSxcbiAgICAgICAgICAgICAgb3ZlcmxheUJhY2tncm91bmQ6ICR0aGlzLmRhdGEoJ21vZGVzdG1vZGFsLW92ZXJsYXktYmFja2dyb3VuZCcpIHx8IGRlZmF1bHRzLm92ZXJsYXlCYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICBkaXNhYmxlRXNjYXBlOiB0eXBlb2YgJHRoaXMuYXR0cignZGF0YS1tb2Rlc3Rtb2RhbC1kaXNhYmxlLWVzY2FwZScpICE9PSAndW5kZWZpbmVkJyA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgdW5jbG9zZWFibGU6IHR5cGVvZiAkdGhpcy5hdHRyKCdkYXRhLW1vZGVzdG1vZGFsLXVuY2xvc2VhYmxlJykgIT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYoY3VzdG9tT3B0aW9ucy5jbG9zZUJ1dHRvbiAhPT0gZGVmYXVsdHMuY2xvc2VCdXR0b24pIGJpbmRDbG9zZShjdXN0b21PcHRpb25zLmNsb3NlQnV0dG9uKTtcbiAgICAgICAgICAkLm1vZGVzdG1vZGFsLm9wZW4oY3VzdG9tT3B0aW9ucyk7XG4gICAgICAgIH0pLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB2YXIgJGxhdGVzdE92ZXJsYXkgPSBfY3VycmVudE1vZGFscy5sZW5ndGggPiAwID8gX2N1cnJlbnRNb2RhbHNbX2N1cnJlbnRNb2RhbHMubGVuZ3RoIC0gMV0ub3ZlcmxheSA6IG51bGw7XG4gICAgICAgICAgaWYgKGUud2hpY2ggPT0gMjcgJiYgJGxhdGVzdE92ZXJsYXkgJiYgISRsYXRlc3RPdmVybGF5Lmhhc0NsYXNzKCdkaXNhYmxlRXNjYXBlJykpICQubW9kZXN0bW9kYWwuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgICQubW9kZXN0bW9kYWwub3BlbiA9IGZ1bmN0aW9uKGN1c3RvbU9wdGlvbnMpe1xuICAgICAgICB2YXIgJG5ld092ZXJsYXkgPSBkZWZhdWx0cy4kb3ZlcmxheS5jbG9uZSgpLFxuICAgICAgICAgICRuZXdNb2RhbCA9IGRlZmF1bHRzLiRtb2RhbC5jbG9uZSgpLFxuICAgICAgICAgIG1vZGFsQ291bnQgPSBfY3VycmVudE1vZGFscy5sZW5ndGggKyAxLFxuICAgICAgICAgIG9wdHMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNoYW5nZWFibGVQcm9wZXJ0aWVzKGN1c3RvbU9wdGlvbnMpKSxcbiAgICAgICAgICBjb21wbGV0ZU92ZXJsYXlTdHlsZXMgPSBvcHRzLm92ZXJsYXlTdHlsZXM7XG5cbiAgICAgICAgaWYgKCFvcHRzLnR5cGUpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAvLyBUT0RPOiBjaGVjayB0cmFuc2l0aW9uZHVyYXRpb24gZm9yIGludCBvciBzdHJpbmdcbiAgICAgICAgaWYgKG9wdHMudHJhbnNpdGlvbkR1cmF0aW9uICE9PSBkZWZhdWx0cy50cmFuc2l0aW9uRHVyYXRpb24pIHtcbiAgICAgICAgICBvcHRzLnRyYW5zaXRpb25Qcm9wZXJ0eSA9IHtcbiAgICAgICAgICAgICctd2Via2l0LXRyYW5zaXRpb24nOiAnYWxsICcgKyBvcHRzLnRyYW5zaXRpb25EdXJhdGlvbiArICdlYXNlJyxcbiAgICAgICAgICAgICctbW96LXRyYW5zaXRpb24nOiAnYWxsICcgKyBvcHRzLnRyYW5zaXRpb25EdXJhdGlvbiArICdlYXNlJyxcbiAgICAgICAgICAgICd0cmFuc2l0aW9uJzogJ2FsbCAnICsgb3B0cy50cmFuc2l0aW9uRHVyYXRpb24gKyAnZWFzZScsXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29tcGxldGVPdmVybGF5U3R5bGVzLmJhY2tncm91bmQgPSBvcHRzLm92ZXJsYXlCYWNrZ3JvdW5kO1xuXG4gICAgICAgICRuZXdPdmVybGF5LmF0dHIoJ2lkJywgJ21vZGVzdG1vZGFsLW92ZXJsYXktJyArIG1vZGFsQ291bnQpXG4gICAgICAgICAgLmNzcyhjb21wbGV0ZU92ZXJsYXlTdHlsZXMpXG4gICAgICAgICAgLmNzcyhvcHRzLnRyYW5zaXRpb25Qcm9wZXJ0eSlcbiAgICAgICAgICAuY3NzKCd6LWluZGV4JywgKG1vZGFsQ291bnQgKyBvcHRzLnpJbmRleCkpO1xuXG4gICAgICAgIGlmKG9wdHMudW5jbG9zZWFibGUpICRuZXdPdmVybGF5LmFkZENsYXNzKCd1bmNsb3NlYWJsZScpO1xuICAgICAgICBpZihvcHRzLmRpc2FibGVFc2NhcGUpICRuZXdPdmVybGF5LmFkZENsYXNzKCdkaXNhYmxlRXNjYXBlJyk7XG5cbiAgICAgICAgJG5ld01vZGFsXG4gICAgICAgICAgLmFkZENsYXNzKG9wdHMubW9kYWxDbGFzcylcbiAgICAgICAgICAuYXR0cignaWQnLCAnbW9kZXN0bW9kYWwtbW9kYWwtJyArIG1vZGFsQ291bnQpXG4gICAgICAgICAgLmNzcyhvcHRzLm1vZGFsU3R5bGVzKVxuICAgICAgICAgIC5jc3Mob3B0cy50cmFuc2l0aW9uUHJvcGVydHkpXG4gICAgICAgICAgLmNzcyh7XG4gICAgICAgICAgICAnei1pbmRleCc6IChtb2RhbENvdW50ICsgb3B0cy56SW5kZXggKyAxKSxcbiAgICAgICAgICAgICd0b3AnOiBvcHRzLnBvc2l0aW9uWSxcbiAgICAgICAgICAgICdsZWZ0Jzogb3B0cy5wb3NpdGlvblhcbiAgICAgICAgICB9KTtcblxuICAgICAgICBpZihvcHRzLnR5cGUgPT0gJ2NvbnRlbnQnIHx8IG9wdHMudHlwZSA9PSAnaHRtbCcpIHtcbiAgICAgICAgICAkbmV3TW9kYWwuaHRtbChvcHRzLnR5cGUgPT0gJ2h0bWwnID8gJChvcHRzLmNvbnRlbnQpLmh0bWwoKSA6IG9wdHMuY29udGVudCk7XG4gICAgICAgICAgcHVzaEFuZEFwcGVuZE1vZGFscygkbmV3TW9kYWwsICRuZXdPdmVybGF5KTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRzLnR5cGUgPT0gJ2FqYXgnKSB7XG4gICAgICAgICAgJC5nZXQob3B0cy5jb250ZW50KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAkbmV3TW9kYWwuaHRtbChkYXRhKTtcbiAgICAgICAgICAgICAgcHVzaEFuZEFwcGVuZE1vZGFscygkbmV3TW9kYWwsICRuZXdPdmVybGF5KTtcbiAgICAgICAgICAgICAgaWYodHlwZW9mIG9wdHMuYWpheENhbGxiYWNrID09PSAnZnVuY3Rpb24nKSBvcHRzLmFqYXhDYWxsYmFjaygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ21vZGVzdG1vZGFsOiBFcnJvciB3aXRoIEFKQVggY2FsbC4nKTsgcmV0dXJuOyB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkLm1vZGVzdG1vZGFsLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkJGxhc3RPcGVuID0gX2N1cnJlbnRNb2RhbHMucG9wKCk7XG4gICAgICAgICQkbGFzdE9wZW4ubW9kYWwuY3NzKCdvcGFjaXR5JywwKTtcbiAgICAgICAgJCRsYXN0T3Blbi5vdmVybGF5LmNzcygnb3BhY2l0eScsMCk7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQkbGFzdE9wZW4ubW9kYWwucmVtb3ZlKClcbiAgICAgICAgICAgICQkbGFzdE9wZW4ub3ZlcmxheS5yZW1vdmUoKTtcbiAgICAgICAgICB9LCA0MDApO1xuICAgICAgfVxuICAgICAgJC5tb2Rlc3Rtb2RhbC5kZXN0cm95ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAkKCdbaWRePW1vZGVzdG1vZGFsLV0sW2NsYXNzXj1tb2Rlc3Rtb2RhbC1dJykucmVtb3ZlKCk7XG4gICAgICAgICAgJC5tb2Rlc3Rtb2RhbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgIH1cblxuICAgICAgaWYoIW1vZGVzdG1vZGFsSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgJC5tb2Rlc3Rtb2RhbC5pbml0KCk7XG4gICAgICAgIG1vZGVzdG1vZGFsSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zKSB7XG4gICAgICAgIGRlZmF1bHRzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBjaGFuZ2VhYmxlUHJvcGVydGllcyhvcHRpb25zKSk7XG4gICAgICB9XG4gICAgfVxufSkoIGpRdWVyeSwgd2luZG93ICwgZG9jdW1lbnQgKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==