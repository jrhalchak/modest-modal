// Modest Modal 1.0.3
// Jonathan Halchak, www.jrhalchak.com, @onlinebhero
// License: MIT - do whatever you want
!function(o,t,e,a){var n=[],s=!1;o.modestmodal=o.modestmodal||function(t){function e(o){return o?{type:o.type||d.type,content:o.content||d.content,closeButton:o.closeButton||d.closeButton,openSelector:o.openSelector||d.openSelector,modalClass:o.modalClass||d.modalClass,transitionDuration:o.transitionDuration||d.transitionDuration,positionX:o.positionX||d.positionX,positionY:o.positionY||d.positionY,overlayBackground:o.overlayBackground||d.overlayBackground,disableEscape:"undefined"!=typeof o.disableEscape?o.disableEscape:d.disableEscape,uncloseable:"undefined"!=typeof o.uncloseable?o.uncloseable:d.uncloseable}:{}}function a(t,e){n.push({modal:t,overlay:e}),t.appendTo("body").css("display","block"),e.appendTo("body").css("visibility","visible"),setTimeout(function(){e.css("opacity",1).on("click",function(){o(this).hasClass("uncloseable")||o.modestmodal.close()}),t.css({opacity:1,top:"50%"}),t.trigger("mm.open")},300)}function l(t){o("body").on("click",t,function(){o.modestmodal.close()})}function i(){d=o.extend({},d,e(t)),l(d.closeButton),o("body").on("click",d.openSelector,function(){var t=o(this),e={type:t.data("modestmodal-type")||d.type,content:t.data("modestmodal-content")||d.content,modalClass:t.data("modestmodal-modal-class")||d.modalClass,closeButton:t.data("modestmodal-close-selector")||d.closeButton,transitionDuration:t.data("modestmodal-transition-duration")||d.transitionDuration,positionX:t.data("modestmodal-position-x")||d.positionX,positionY:t.data("modestmodal-position-y")||d.positionY,overlayBackground:t.data("modestmodal-overlay-background")||d.overlayBackground,disableEscape:"undefined"!=typeof t.attr("data-modestmodal-disable-escape")?!0:!1,uncloseable:"undefined"!=typeof t.attr("data-modestmodal-uncloseable")?!0:!1};e.closeButton!==d.closeButton&&l(e.closeButton),o.modestmodal.open(e)}).on("keyup",function(t){var e=n.length>0?n[n.length-1].overlay:null;27==t.which&&e&&!e.hasClass("disableEscape")&&o.modestmodal.close()})}var d={$modal:o('<div class="modestmodal-modal" />'),$overlay:o('<div class="modestmodal-overlay" />'),closeButton:".modestmodal-close",openSelector:"[data-modestmodal]",type:null,content:"",modalClass:"",zIndex:99900,transitionDuration:"0.4s",transitionProperty:{"-webkit-transition":"all 0.4s ease","-moz-transition":"all 0.4s ease",transition:"all 0.4s ease;"},positionX:"50%",positionY:"60%",modalStyles:{display:"none",position:"fixed","-webkit-transform":"translate(-50%, -50%)","-ms-transform":"translate(-50%, -50%)",transform:"translate(-50%, -50%)",opacity:0},overlayStyles:{visibility:"hidden",position:"fixed",top:0,bottom:0,left:0,right:0,opacity:0,width:"100%",height:"100%","background-color":"black"},overlayBackground:"rgba(0,0,0,0.3)",uncloseable:!1,disableEscape:!1,ajaxCallback:null};o.modestmodal.open=function(t){var s=d.$overlay.clone(),l=n.length+1,i=o.extend({},d,e(t)),r="html"==i.type?o(i.content).data("doNotRemove",!0):d.$modal.clone(),c=i.overlayStyles;return i.type?(i.transitionDuration!==d.transitionDuration&&(i.transitionProperty={"-webkit-transition":"all "+i.transitionDuration+"ease","-moz-transition":"all "+i.transitionDuration+"ease",transition:"all "+i.transitionDuration+"ease"}),c.background=i.overlayBackground,s.attr("id","modestmodal-overlay-"+l).css(c).css(i.transitionProperty).css("z-index",l+i.zIndex),i.uncloseable&&s.addClass("uncloseable"),i.disableEscape&&s.addClass("disableEscape"),r.addClass(i.modalClass).attr("id","modestmodal-modal-"+l).css(i.modalStyles).css(i.transitionProperty).css({"z-index":l+i.zIndex+1,top:i.positionY,left:i.positionX}),r.trigger("mm.beforeOpen"),void("content"==i.type||"html"==i.type?("content"==i.type&&r.html(i.content),a(r,s)):"ajax"==i.type&&o.get(i.content).then(function(o){r.html(o),a(r,s),"function"==typeof i.ajaxCallback&&i.ajaxCallback()}).error(function(){console.log("modestmodal: Error with AJAX call.")}))):!1},o.modestmodal.getOpenModals=function(){return n},o.modestmodal.close=function(t){var e=t&&t<n.length?n.splice(t,1)[0]:n.pop();o(e.modal).trigger("mm.beforeClose",[e.modal,e.overlay]),e.modal.css("opacity",0),e.overlay.css("opacity",0),setTimeout(function(){o(e.modal).trigger("mm.close"),e.modal.data("doNotRemove")||e.modal.remove(),e.overlay.remove()},400)},o.modestmodal.destroy=function(){o("[id^=modestmodal-],[class^=modestmodal-]").remove(),o.modestmodal.prototype.destroy.apply(this,arguments)},s?t&&(d=o.extend({},d,e(t))):(i(),s=!0)}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVzdG1vZGFsLmpxdWVyeS5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiZG9jdW1lbnQiLCJ1bmRlZmluZWQiLCJfY3VycmVudE1vZGFscyIsIm1vZGVzdG1vZGFsSW5pdGlhbGl6ZWQiLCJtb2Rlc3Rtb2RhbCIsIm9wdGlvbnMiLCJjaGFuZ2VhYmxlUHJvcGVydGllcyIsIm9wdGlvbk9iamVjdCIsInR5cGUiLCJkZWZhdWx0cyIsImNvbnRlbnQiLCJjbG9zZUJ1dHRvbiIsIm9wZW5TZWxlY3RvciIsIm1vZGFsQ2xhc3MiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJwb3NpdGlvblgiLCJwb3NpdGlvblkiLCJvdmVybGF5QmFja2dyb3VuZCIsImRpc2FibGVFc2NhcGUiLCJ1bmNsb3NlYWJsZSIsInB1c2hBbmRBcHBlbmRNb2RhbHMiLCIkbmV3TW9kYWwiLCIkbmV3T3ZlcmxheSIsInB1c2giLCJtb2RhbCIsIm92ZXJsYXkiLCJhcHBlbmRUbyIsImNzcyIsInNldFRpbWVvdXQiLCJvbiIsInRoaXMiLCJoYXNDbGFzcyIsImNsb3NlIiwib3BhY2l0eSIsInRvcCIsInRyaWdnZXIiLCJiaW5kQ2xvc2UiLCJtb2Rlc3Rtb2RhbEluaXQiLCJleHRlbmQiLCIkdGhpcyIsImN1c3RvbU9wdGlvbnMiLCJkYXRhIiwiYXR0ciIsIm9wZW4iLCJlIiwiJGxhdGVzdE92ZXJsYXkiLCJsZW5ndGgiLCJ3aGljaCIsIiRtb2RhbCIsIiRvdmVybGF5IiwiekluZGV4IiwidHJhbnNpdGlvblByb3BlcnR5IiwiLXdlYmtpdC10cmFuc2l0aW9uIiwiLW1vei10cmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsIm1vZGFsU3R5bGVzIiwiZGlzcGxheSIsInBvc2l0aW9uIiwiLXdlYmtpdC10cmFuc2Zvcm0iLCItbXMtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwib3ZlcmxheVN0eWxlcyIsInZpc2liaWxpdHkiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmQtY29sb3IiLCJhamF4Q2FsbGJhY2siLCJjbG9uZSIsIm1vZGFsQ291bnQiLCJvcHRzIiwiY29tcGxldGVPdmVybGF5U3R5bGVzIiwiYmFja2dyb3VuZCIsImFkZENsYXNzIiwiei1pbmRleCIsImh0bWwiLCJnZXQiLCJ0aGVuIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZ2V0T3Blbk1vZGFscyIsIm1vZGFsSW5kZXgiLCIkJGxhc3RPcGVuIiwic3BsaWNlIiwicG9wIiwicmVtb3ZlIiwiZGVzdHJveSIsInByb3RvdHlwZSIsImFwcGx5IiwiYXJndW1lbnRzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOzs7Q0FJQyxTQUFZQSxFQUFHQyxFQUFRQyxFQUFVQyxHQUNoQyxHQUFJQyxNQUFxQkMsR0FBeUIsQ0FFbERMLEdBQUVNLFlBQWNOLEVBQUVNLGFBQWUsU0FBU0MsR0E4Q3RDLFFBQVNDLEdBQXFCQyxHQUM1QixNQUFJQSxJQUVGQyxLQUFNRCxFQUFhQyxNQUFRQyxFQUFTRCxLQUNwQ0UsUUFBU0gsRUFBYUcsU0FBV0QsRUFBU0MsUUFDMUNDLFlBQWFKLEVBQWFJLGFBQWVGLEVBQVNFLFlBQ2xEQyxhQUFjTCxFQUFhSyxjQUFnQkgsRUFBU0csYUFDcERDLFdBQVlOLEVBQWFNLFlBQWNKLEVBQVNJLFdBQ2hEQyxtQkFBb0JQLEVBQWFPLG9CQUFzQkwsRUFBU0ssbUJBQ2hFQyxVQUFXUixFQUFhUSxXQUFhTixFQUFTTSxVQUM5Q0MsVUFBV1QsRUFBYVMsV0FBYVAsRUFBU08sVUFDOUNDLGtCQUFtQlYsRUFBYVUsbUJBQXFCUixFQUFTUSxrQkFDOURDLGNBQXFELG1CQUEvQlgsR0FBYVcsY0FBZ0NYLEVBQWFXLGNBQWdCVCxFQUFTUyxjQUN6R0MsWUFBaUQsbUJBQTdCWixHQUFhWSxZQUE4QlosRUFBYVksWUFBY1YsRUFBU1UsZ0JBSXZHLFFBQVNDLEdBQW9CQyxFQUFXQyxHQUN0Q3BCLEVBQWVxQixNQUNiQyxNQUFPSCxFQUNQSSxRQUFTSCxJQUdYRCxFQUFVSyxTQUFTLFFBQVFD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N0IsR0FBSUMsR0FBYUQsR0FBY0EsRUFBYWxGLEVBQWU0QyxPQUFTNUMsRUFBZW9GLE9BQU9GLEVBQVksR0FBRyxHQUFLbEYsRUFBZXFGLEtBQzdIekYsR0FBRXVGLEVBQVc3RCxPQUFPVyxRQUFRLGtCQUFtQmtELEVBQVc3RCxNQUFPNkQsRUFBVzVELFVBQzVFNEQsRUFBVzdELE1BQU1HLElBQUksVUFBVSxHQUMvQjBELEVBQVc1RCxRQUFRRSxJQUFJLFVBQVUsR0FDL0JDLFdBQVcsV0FDVDlCLEVBQUV1RixFQUFXN0QsT0FBT1csUUFBUSxZQUN4QmtELEVBQVc3RCxNQUFNaUIsS0FBSyxnQkFBZ0I0QyxFQUFXN0QsTUFBTWdFLFNBQzNESCxFQUFXNUQsUUFBUStELFVBQ2xCLE1BR1AxRixFQUFFTSxZQUFZcUYsUUFBVSxXQUNwQjNGLEVBQUUsNENBQTRDMEYsU0FDOUMxRixFQUFFTSxZQUFZc0YsVUFBVUQsUUFBUUUsTUFBTTdELEtBQU04RCxZQUc1Q3pGLEVBR09FLElBQ1RJLEVBQVdYLEVBQUV3QyxVQUFXN0IsRUFBVUgsRUFBcUJELE1BSHZEZ0MsSUFDQWxDLEdBQXlCLEtBSzdCMEYsT0FBUTlGLE9BQVNDIiwiZmlsZSI6Im1vZGVzdG1vZGFsLmpxdWVyeS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBNb2Rlc3QgTW9kYWwgMS4wLjNcbi8vIEpvbmF0aGFuIEhhbGNoYWssIHd3dy5qcmhhbGNoYWsuY29tLCBAb25saW5lYmhlcm9cbi8vIExpY2Vuc2U6IE1JVCAtIGRvIHdoYXRldmVyIHlvdSB3YW50XG5cbjsoZnVuY3Rpb24gKCAkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQgKSB7XG4gIHZhciBfY3VycmVudE1vZGFscyA9IFtdLCBtb2Rlc3Rtb2RhbEluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgJC5tb2Rlc3Rtb2RhbCA9ICQubW9kZXN0bW9kYWwgfHwgZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgLy8gKiogbWVhbnMgd2lsbCBhbGxvdyBvdmVycmlkZVxuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAkbW9kYWw6ICQoJzxkaXYgY2xhc3M9XCJtb2Rlc3Rtb2RhbC1tb2RhbFwiIC8+JyksXG4gICAgICAgICAgJG92ZXJsYXk6ICQoJzxkaXYgY2xhc3M9XCJtb2Rlc3Rtb2RhbC1vdmVybGF5XCIgLz4nKSxcbiAgICAgICAgICBjbG9zZUJ1dHRvbjogJy5tb2Rlc3Rtb2RhbC1jbG9zZScsIC8vICoqXG4gICAgICAgICAgb3BlblNlbGVjdG9yOiAnW2RhdGEtbW9kZXN0bW9kYWxdJywgLy8gKipcbiAgICAgICAgICB0eXBlOiBudWxsLCAvLyAqKlxuICAgICAgICAgIGNvbnRlbnQ6ICcnLCAvLyAqKlxuICAgICAgICAgIG1vZGFsQ2xhc3M6ICcnLCAvLyAqKlxuICAgICAgICAgIHpJbmRleDogOTk5MDAsXG4gICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAnMC40cycsIC8vICoqXG4gICAgICAgICAgdHJhbnNpdGlvblByb3BlcnR5OiB7XG4gICAgICAgICAgICAgICctd2Via2l0LXRyYW5zaXRpb24nOiAnYWxsIDAuNHMgZWFzZScsXG4gICAgICAgICAgICAgICctbW96LXRyYW5zaXRpb24nOiAnYWxsIDAuNHMgZWFzZScsXG4gICAgICAgICAgICAgICd0cmFuc2l0aW9uJzogJ2FsbCAwLjRzIGVhc2U7J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9zaXRpb25YOiAnNTAlJywgLy8gZnJvbSBsZWZ0IC8vICoqXG4gICAgICAgICAgcG9zaXRpb25ZOic2MCUnLCAvLyBmcm9tIHRvcCAvLyAqKlxuICAgICAgICAgIG1vZGFsU3R5bGVzOiB7XG4gICAgICAgICAgICAnZGlzcGxheSc6J25vbmUnLFxuICAgICAgICAgICAgJ3Bvc2l0aW9uJzonZml4ZWQnLFxuICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknLFxuICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknLFxuICAgICAgICAgICAgJ29wYWNpdHknOjBcbiAgICAgICAgICB9LFxuICAgICAgICAgIG92ZXJsYXlTdHlsZXM6IHtcbiAgICAgICAgICAgICd2aXNpYmlsaXR5JzonaGlkZGVuJyxcbiAgICAgICAgICAgICdwb3NpdGlvbic6J2ZpeGVkJyxcbiAgICAgICAgICAgICd0b3AnOjAsXG4gICAgICAgICAgICAnYm90dG9tJzowLFxuICAgICAgICAgICAgJ2xlZnQnOjAsXG4gICAgICAgICAgICAncmlnaHQnOjAsXG4gICAgICAgICAgICAnb3BhY2l0eSc6MCxcbiAgICAgICAgICAgICd3aWR0aCc6JzEwMCUnLFxuICAgICAgICAgICAgJ2hlaWdodCc6JzEwMCUnLFxuICAgICAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOidibGFjaycsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvdmVybGF5QmFja2dyb3VuZDogJ3JnYmEoMCwwLDAsMC4zKScsIC8vKipcbiAgICAgICAgICB1bmNsb3NlYWJsZTogZmFsc2UsIC8vKipcbiAgICAgICAgICBkaXNhYmxlRXNjYXBlOiBmYWxzZSwgLy8qKlxuICAgICAgICAgIGFqYXhDYWxsYmFjazogbnVsbCAvLyoqXG4gICAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGNoYW5nZWFibGVQcm9wZXJ0aWVzKG9wdGlvbk9iamVjdCkge1xuICAgICAgICBpZighb3B0aW9uT2JqZWN0KSByZXR1cm4ge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogb3B0aW9uT2JqZWN0LnR5cGUgfHwgZGVmYXVsdHMudHlwZSxcbiAgICAgICAgICBjb250ZW50OiBvcHRpb25PYmplY3QuY29udGVudCB8fCBkZWZhdWx0cy5jb250ZW50LFxuICAgICAgICAgIGNsb3NlQnV0dG9uOiBvcHRpb25PYmplY3QuY2xvc2VCdXR0b24gfHwgZGVmYXVsdHMuY2xvc2VCdXR0b24sXG4gICAgICAgICAgb3BlblNlbGVjdG9yOiBvcHRpb25PYmplY3Qub3BlblNlbGVjdG9yIHx8IGRlZmF1bHRzLm9wZW5TZWxlY3RvcixcbiAgICAgICAgICBtb2RhbENsYXNzOiBvcHRpb25PYmplY3QubW9kYWxDbGFzcyB8fCBkZWZhdWx0cy5tb2RhbENsYXNzLFxuICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogb3B0aW9uT2JqZWN0LnRyYW5zaXRpb25EdXJhdGlvbiB8fCBkZWZhdWx0cy50cmFuc2l0aW9uRHVyYXRpb24sXG4gICAgICAgICAgcG9zaXRpb25YOiBvcHRpb25PYmplY3QucG9zaXRpb25YIHx8IGRlZmF1bHRzLnBvc2l0aW9uWCxcbiAgICAgICAgICBwb3NpdGlvblk6IG9wdGlvbk9iamVjdC5wb3NpdGlvblkgfHwgZGVmYXVsdHMucG9zaXRpb25ZLFxuICAgICAgICAgIG92ZXJsYXlCYWNrZ3JvdW5kOiBvcHRpb25PYmplY3Qub3ZlcmxheUJhY2tncm91bmQgfHwgZGVmYXVsdHMub3ZlcmxheUJhY2tncm91bmQsXG4gICAgICAgICAgZGlzYWJsZUVzY2FwZTogdHlwZW9mIG9wdGlvbk9iamVjdC5kaXNhYmxlRXNjYXBlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbk9iamVjdC5kaXNhYmxlRXNjYXBlIDogZGVmYXVsdHMuZGlzYWJsZUVzY2FwZSxcbiAgICAgICAgICB1bmNsb3NlYWJsZTogdHlwZW9mIG9wdGlvbk9iamVjdC51bmNsb3NlYWJsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25PYmplY3QudW5jbG9zZWFibGUgOiBkZWZhdWx0cy51bmNsb3NlYWJsZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHB1c2hBbmRBcHBlbmRNb2RhbHMoJG5ld01vZGFsLCAkbmV3T3ZlcmxheSkge1xuICAgICAgICBfY3VycmVudE1vZGFscy5wdXNoKHtcbiAgICAgICAgICBtb2RhbDogJG5ld01vZGFsLFxuICAgICAgICAgIG92ZXJsYXk6ICRuZXdPdmVybGF5XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRuZXdNb2RhbC5hcHBlbmRUbygnYm9keScpLmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XG4gICAgICAgICRuZXdPdmVybGF5LmFwcGVuZFRvKCdib2R5JykuY3NzKCd2aXNpYmlsaXR5JywndmlzaWJsZScpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRuZXdPdmVybGF5LmNzcygnb3BhY2l0eScsMSkub24oJ2NsaWNrJyxmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCEkKHRoaXMpLmhhc0NsYXNzKCd1bmNsb3NlYWJsZScpKVxuICAgICAgICAgICAgICAkLm1vZGVzdG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJG5ld01vZGFsLmNzcyh7J29wYWNpdHknOjEsJ3RvcCc6JzUwJSd9KTtcbiAgICAgICAgICAkbmV3TW9kYWwudHJpZ2dlcignbW0ub3BlbicpO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kQ2xvc2UoY2xvc2VCdXR0b24pIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsIGNsb3NlQnV0dG9uLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQubW9kZXN0bW9kYWwuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG1vZGVzdG1vZGFsSW5pdCgpIHtcbiAgICAgICAgZGVmYXVsdHMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNoYW5nZWFibGVQcm9wZXJ0aWVzKG9wdGlvbnMpKTtcblxuICAgICAgICBiaW5kQ2xvc2UoZGVmYXVsdHMuY2xvc2VCdXR0b24pO1xuXG4gICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCBkZWZhdWx0cy5vcGVuU2VsZWN0b3IsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICBjdXN0b21PcHRpb25zID0ge1xuICAgICAgICAgICAgICB0eXBlOiAkdGhpcy5kYXRhKCdtb2Rlc3Rtb2RhbC10eXBlJykgfHwgZGVmYXVsdHMudHlwZSxcbiAgICAgICAgICAgICAgY29udGVudDogJHRoaXMuZGF0YSgnbW9kZXN0bW9kYWwtY29udGVudCcpIHx8IGRlZmF1bHRzLmNvbnRlbnQsXG4gICAgICAgICAgICAgIG1vZGFsQ2xhc3M6ICR0aGlzLmRhdGEoJ21vZGVzdG1vZGFsLW1vZGFsLWNsYXNzJykgfHwgZGVmYXVsdHMubW9kYWxDbGFzcyxcbiAgICAgICAgICAgICAgY2xvc2VCdXR0b246ICR0aGlzLmRhdGEoJ21vZGVzdG1vZGFsLWNsb3NlLXNlbGVjdG9yJykgfHwgZGVmYXVsdHMuY2xvc2VCdXR0b24sXG4gICAgICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogJHRoaXMuZGF0YSgnbW9kZXN0bW9kYWwtdHJhbnNpdGlvbi1kdXJhdGlvbicpIHx8IGRlZmF1bHRzLnRyYW5zaXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgICAgcG9zaXRpb25YOiAkdGhpcy5kYXRhKCdtb2Rlc3Rtb2RhbC1wb3NpdGlvbi14JykgfHwgZGVmYXVsdHMucG9zaXRpb25YLFxuICAgICAgICAgICAgICBwb3NpdGlvblk6ICR0aGlzLmRhdGEoJ21vZGVzdG1vZGFsLXBvc2l0aW9uLXknKSB8fCBkZWZhdWx0cy5wb3NpdGlvblksXG4gICAgICAgICAgICAgIG92ZXJsYXlCYWNrZ3JvdW5kOiAkdGhpcy5kYXRhKCdtb2Rlc3Rtb2RhbC1vdmVybGF5LWJhY2tncm91bmQnKSB8fCBkZWZhdWx0cy5vdmVybGF5QmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgZGlzYWJsZUVzY2FwZTogdHlwZW9mICR0aGlzLmF0dHIoJ2RhdGEtbW9kZXN0bW9kYWwtZGlzYWJsZS1lc2NhcGUnKSAhPT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgIHVuY2xvc2VhYmxlOiB0eXBlb2YgJHRoaXMuYXR0cignZGF0YS1tb2Rlc3Rtb2RhbC11bmNsb3NlYWJsZScpICE9PSAndW5kZWZpbmVkJyA/IHRydWUgOiBmYWxzZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgIGlmKGN1c3RvbU9wdGlvbnMuY2xvc2VCdXR0b24gIT09IGRlZmF1bHRzLmNsb3NlQnV0dG9uKSBiaW5kQ2xvc2UoY3VzdG9tT3B0aW9ucy5jbG9zZUJ1dHRvbik7XG4gICAgICAgICAgJC5tb2Rlc3Rtb2RhbC5vcGVuKGN1c3RvbU9wdGlvbnMpO1xuICAgICAgICB9KS5vbigna2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyICRsYXRlc3RPdmVybGF5ID0gX2N1cnJlbnRNb2RhbHMubGVuZ3RoID4gMCA/IF9jdXJyZW50TW9kYWxzW19jdXJyZW50TW9kYWxzLmxlbmd0aCAtIDFdLm92ZXJsYXkgOiBudWxsO1xuICAgICAgICAgIGlmIChlLndoaWNoID09IDI3ICYmICRsYXRlc3RPdmVybGF5ICYmICEkbGF0ZXN0T3ZlcmxheS5oYXNDbGFzcygnZGlzYWJsZUVzY2FwZScpKSAkLm1vZGVzdG1vZGFsLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAkLm1vZGVzdG1vZGFsLm9wZW4gPSBmdW5jdGlvbihjdXN0b21PcHRpb25zKXtcbiAgICAgICAgdmFyICRuZXdPdmVybGF5ID0gZGVmYXVsdHMuJG92ZXJsYXkuY2xvbmUoKSxcbiAgICAgICAgICBtb2RhbENvdW50ID0gX2N1cnJlbnRNb2RhbHMubGVuZ3RoICsgMSxcbiAgICAgICAgICBvcHRzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBjaGFuZ2VhYmxlUHJvcGVydGllcyhjdXN0b21PcHRpb25zKSksXG4gICAgICAgICAgJG5ld01vZGFsID0gb3B0cy50eXBlID09ICdodG1sJyA/ICQob3B0cy5jb250ZW50KS5kYXRhKCdkb05vdFJlbW92ZScsIHRydWUpIDogZGVmYXVsdHMuJG1vZGFsLmNsb25lKCksXG4gICAgICAgICAgY29tcGxldGVPdmVybGF5U3R5bGVzID0gb3B0cy5vdmVybGF5U3R5bGVzO1xuXG4gICAgICAgIGlmICghb3B0cy50eXBlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgLy8gVE9ETzogY2hlY2sgdHJhbnNpdGlvbmR1cmF0aW9uIGZvciBpbnQgb3Igc3RyaW5nXG4gICAgICAgIGlmIChvcHRzLnRyYW5zaXRpb25EdXJhdGlvbiAhPT0gZGVmYXVsdHMudHJhbnNpdGlvbkR1cmF0aW9uKSB7XG4gICAgICAgICAgb3B0cy50cmFuc2l0aW9uUHJvcGVydHkgPSB7XG4gICAgICAgICAgICAnLXdlYmtpdC10cmFuc2l0aW9uJzogJ2FsbCAnICsgb3B0cy50cmFuc2l0aW9uRHVyYXRpb24gKyAnZWFzZScsXG4gICAgICAgICAgICAnLW1vei10cmFuc2l0aW9uJzogJ2FsbCAnICsgb3B0cy50cmFuc2l0aW9uRHVyYXRpb24gKyAnZWFzZScsXG4gICAgICAgICAgICAndHJhbnNpdGlvbic6ICdhbGwgJyArIG9wdHMudHJhbnNpdGlvbkR1cmF0aW9uICsgJ2Vhc2UnLFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBsZXRlT3ZlcmxheVN0eWxlcy5iYWNrZ3JvdW5kID0gb3B0cy5vdmVybGF5QmFja2dyb3VuZDtcblxuICAgICAgICAkbmV3T3ZlcmxheS5hdHRyKCdpZCcsICdtb2Rlc3Rtb2RhbC1vdmVybGF5LScgKyBtb2RhbENvdW50KVxuICAgICAgICAgIC5jc3MoY29tcGxldGVPdmVybGF5U3R5bGVzKVxuICAgICAgICAgIC5jc3Mob3B0cy50cmFuc2l0aW9uUHJvcGVydHkpXG4gICAgICAgICAgLmNzcygnei1pbmRleCcsIChtb2RhbENvdW50ICsgb3B0cy56SW5kZXgpKTtcblxuICAgICAgICBpZihvcHRzLnVuY2xvc2VhYmxlKSAkbmV3T3ZlcmxheS5hZGRDbGFzcygndW5jbG9zZWFibGUnKTtcbiAgICAgICAgaWYob3B0cy5kaXNhYmxlRXNjYXBlKSAkbmV3T3ZlcmxheS5hZGRDbGFzcygnZGlzYWJsZUVzY2FwZScpO1xuXG4gICAgICAgICRuZXdNb2RhbFxuICAgICAgICAgIC5hZGRDbGFzcyhvcHRzLm1vZGFsQ2xhc3MpXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ21vZGVzdG1vZGFsLW1vZGFsLScgKyBtb2RhbENvdW50KVxuICAgICAgICAgIC5jc3Mob3B0cy5tb2RhbFN0eWxlcylcbiAgICAgICAgICAuY3NzKG9wdHMudHJhbnNpdGlvblByb3BlcnR5KVxuICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgJ3otaW5kZXgnOiAobW9kYWxDb3VudCArIG9wdHMuekluZGV4ICsgMSksXG4gICAgICAgICAgICAndG9wJzogb3B0cy5wb3NpdGlvblksXG4gICAgICAgICAgICAnbGVmdCc6IG9wdHMucG9zaXRpb25YXG4gICAgICAgICAgfSk7XG4gICAgICAgICRuZXdNb2RhbC50cmlnZ2VyKCdtbS5iZWZvcmVPcGVuJyk7XG5cbiAgICAgICAgaWYob3B0cy50eXBlID09ICdjb250ZW50JyB8fCBvcHRzLnR5cGUgPT0gJ2h0bWwnKSB7XG4gICAgICAgICAgaWYob3B0cy50eXBlID09ICdjb250ZW50JykgJG5ld01vZGFsLmh0bWwob3B0cy5jb250ZW50KTtcbiAgICAgICAgICBwdXNoQW5kQXBwZW5kTW9kYWxzKCRuZXdNb2RhbCwgJG5ld092ZXJsYXkpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdHMudHlwZSA9PSAnYWpheCcpIHtcbiAgICAgICAgICAkLmdldChvcHRzLmNvbnRlbnQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICRuZXdNb2RhbC5odG1sKGRhdGEpO1xuICAgICAgICAgICAgICBwdXNoQW5kQXBwZW5kTW9kYWxzKCRuZXdNb2RhbCwgJG5ld092ZXJsYXkpO1xuICAgICAgICAgICAgICBpZih0eXBlb2Ygb3B0cy5hamF4Q2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIG9wdHMuYWpheENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnbW9kZXN0bW9kYWw6IEVycm9yIHdpdGggQUpBWCBjYWxsLicpOyByZXR1cm47IH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICQubW9kZXN0bW9kYWwuZ2V0T3Blbk1vZGFscyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRNb2RhbHM7XG4gICAgICB9XG5cbiAgICAgICQubW9kZXN0bW9kYWwuY2xvc2UgPSBmdW5jdGlvbihtb2RhbEluZGV4KSB7XG4gICAgICAgIHZhciAkJGxhc3RPcGVuID0gbW9kYWxJbmRleCAmJiBtb2RhbEluZGV4IDwgX2N1cnJlbnRNb2RhbHMubGVuZ3RoID8gX2N1cnJlbnRNb2RhbHMuc3BsaWNlKG1vZGFsSW5kZXgsIDEpWzBdIDogX2N1cnJlbnRNb2RhbHMucG9wKCk7XG4gICAgICAgICQoJCRsYXN0T3Blbi5tb2RhbCkudHJpZ2dlcignbW0uYmVmb3JlQ2xvc2UnLCBbJCRsYXN0T3Blbi5tb2RhbCwgJCRsYXN0T3Blbi5vdmVybGF5XSk7XG4gICAgICAgICQkbGFzdE9wZW4ubW9kYWwuY3NzKCdvcGFjaXR5JywwKTtcbiAgICAgICAgJCRsYXN0T3Blbi5vdmVybGF5LmNzcygnb3BhY2l0eScsMCk7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJCRsYXN0T3Blbi5tb2RhbCkudHJpZ2dlcignbW0uY2xvc2UnKTtcbiAgICAgICAgICAgIGlmKCEkJGxhc3RPcGVuLm1vZGFsLmRhdGEoJ2RvTm90UmVtb3ZlJykpICQkbGFzdE9wZW4ubW9kYWwucmVtb3ZlKClcbiAgICAgICAgICAgICQkbGFzdE9wZW4ub3ZlcmxheS5yZW1vdmUoKTtcbiAgICAgICAgICB9LCA0MDApO1xuICAgICAgfVxuXG4gICAgICAkLm1vZGVzdG1vZGFsLmRlc3Ryb3kgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICQoJ1tpZF49bW9kZXN0bW9kYWwtXSxbY2xhc3NePW1vZGVzdG1vZGFsLV0nKS5yZW1vdmUoKTtcbiAgICAgICAgICAkLm1vZGVzdG1vZGFsLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyApO1xuICAgICAgfVxuXG4gICAgICBpZighbW9kZXN0bW9kYWxJbml0aWFsaXplZCkge1xuICAgICAgICBtb2Rlc3Rtb2RhbEluaXQoKTtcbiAgICAgICAgbW9kZXN0bW9kYWxJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgZGVmYXVsdHMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNoYW5nZWFibGVQcm9wZXJ0aWVzKG9wdGlvbnMpKTtcbiAgICAgIH1cbiAgICB9XG59KSggalF1ZXJ5LCB3aW5kb3cgLCBkb2N1bWVudCApO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9